(()=>{"use strict";class e{constructor(e){this.name=e,this.objectives=[]}getName(){return this.name}setName(e){this.name=e}getObjectives(){return this.objectives}setObjectives(e){this.objectives=e}getObjective(e){return this.objectives.find((t=>t.getName()===e))}addObjective(e){this.objectives.find((t=>t.getName()===e.name))||this.objectives.push(e)}deleteObjective(e){const t=this.objectives.find((t=>t.getName()===e));this.objectives.splice(this.objectives.indexOf(t),1)}}class t{constructor(e,t,s){this.name=e,this.description=t,this.dueDate=s}getName(){return this.name}setName(e){this.name=e}getDescription(){return this.description}setDescription(e){this.description=e}getDueDate(){return this.dueDate}}class s{constructor(){this.missions=[],this.missions.push(new e("Today")),this.missions.push(new e("This Week"))}setMissions(e){this.missions=e}getMissions(){return this.missions}getMission(e){return this.missions.find((t=>t.getName()===e))}addMission(e){this.missions.find((t=>t.getName()===e.name))||this.missions.push(e)}deleteMission(e){const t=this.missions.find((t=>t.getName()===e));this.missions.splice(this.missions.indexOf(t),1)}}class i{saveQuestMenu(e){localStorage.setItem("questmenu",JSON.stringify(e))}getQuestMenu(){const i=Object.assign(new s,JSON.parse(localStorage.getItem("questmenu")));return i.setMissions(i.getMissions().map((t=>Object.assign(new e,t)))),i.getMissions().forEach((e=>e.setObjectives(e.getObjectives().map((e=>Object.assign(new t,e)))))),i}addMission(e){const t=this.getQuestMenu();t.addMission(e),this.saveQuestMenu(t)}deleteMission(e){const t=this.getQuestMenu();t.deleteMission(e),this.saveQuestMenu(t)}addObjective(e,t){const s=this.getQuestMenu();s.getMission(e).addObjective(t),this.saveQuestMenu(s)}deleteObjective(e,t){const s=this.getQuestMenu();s.getMission(e).deleteObjective(t),this.saveQuestMenu(s)}renameObjective(e,t,s){const i=this.getQuestMenu();i.getMission(e).getObjective(t).setName(s),this.saveQuestMenu(i)}}(()=>{document.querySelector(".main");const s=new i,n=(new e("Testing mission"),new e("Trying"));s.addMission(n);const o=new t("Testing objective","this is for testing"),c=new t("Test for Today","todaaaay");s.addObjective("Today",o),s.addObjective("Today",c);const a=new t("Trying empty message","testing");s.addObjective("Trying",a);const d=document.querySelector(".missions"),u=document.querySelector(".objectives"),m=document.querySelector(".empty-obj-message");function r(e){const t=document.createElement("li");t.classList.add("mission"),t.setAttribute("role","button");const s=document.createElement("h3");return s.textContent=e.getName(),t.addEventListener("click",(()=>{!function(e){g(u);const t=e.getObjectives();0!==t.length?m.style.display="none":m.style.display="block";for(const e of t)u.appendChild(h(e))}(e)})),t.appendChild(s),t}function h(e){const t=document.createElement("li");t.classList.add("objective");const s=document.createElement("h4");return s.textContent=e.getName(),t.appendChild(s),t}function g(e){e.textContent=""}document.getElementById("add-mission"),document.getElementById("add-objective"),function(){!function(){g(d);const e=s.getQuestMenu().missions;for(const t of e)d.appendChild(r(t))}();const e=s.getQuestMenu().getMission("Today").getObjectives();for(const t of e)u.appendChild(h(t))}(),console.log(s.getQuestMenu().missions)})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoibUJBR2UsTUFBTUEsRUFDbkJDLFlBQVlDLEdBQ1ZDLEtBQUtELEtBQU9BLEVBQ1pDLEtBQUtDLFdBQWEsRUFDcEIsQ0FFQUMsVUFDRSxPQUFPRixLQUFLRCxJQUNkLENBRUFJLFFBQVFDLEdBQ05KLEtBQUtELEtBQU9LLENBQ2QsQ0FFQUMsZ0JBQ0UsT0FBT0wsS0FBS0MsVUFDZCxDQUVBSyxjQUFjTCxHQUNaRCxLQUFLQyxXQUFhQSxDQUNwQixDQUVBTSxhQUFhQyxHQUNYLE9BQU9SLEtBQUtDLFdBQVdRLE1BQU1DLEdBQVFBLEVBQUlSLFlBQWNNLEdBQ3pELENBRUFHLGFBQWFDLEdBQ05aLEtBQUtDLFdBQVdRLE1BQU1DLEdBQVFBLEVBQUlSLFlBQWNVLEVBQU9iLFFBQzFEQyxLQUFLQyxXQUFXWSxLQUFLRCxFQUV6QixDQUVBRSxnQkFBZ0JOLEdBQ2QsTUFBTU8sRUFBY2YsS0FBS0MsV0FBV1EsTUFBTUMsR0FBUUEsRUFBSVIsWUFBY00sSUFDcEVSLEtBQUtDLFdBQVdlLE9BQU9oQixLQUFLQyxXQUFXZ0IsUUFBUUYsR0FBYyxFQUMvRCxFQ3RDYSxNQUFNRyxFQUNqQnBCLFlBQVlDLEVBQU1vQixFQUFhQyxHQUMzQnBCLEtBQUtELEtBQU9BLEVBQ1pDLEtBQUttQixZQUFjQSxFQUNuQm5CLEtBQUtvQixRQUFVQSxDQUNuQixDQUVBbEIsVUFDSSxPQUFPRixLQUFLRCxJQUNoQixDQUVBSSxRQUFRSyxHQUNKUixLQUFLRCxLQUFPUyxDQUNoQixDQUVBYSxpQkFDSSxPQUFPckIsS0FBS21CLFdBQ2hCLENBRUFHLGVBQWVDLEdBQ1h2QixLQUFLbUIsWUFBY0ksQ0FDdkIsQ0FFQUMsYUFDSSxPQUFPeEIsS0FBS29CLE9BQ2hCLEVDdkJXLE1BQU1LLEVBQ2pCM0IsY0FDSUUsS0FBSzBCLFNBQVcsR0FDaEIxQixLQUFLMEIsU0FBU2IsS0FBSyxJQUFJaEIsRUFBUSxVQUMvQkcsS0FBSzBCLFNBQVNiLEtBQUssSUFBSWhCLEVBQVEsYUFDbkMsQ0FFQThCLFlBQVlELEdBQ1IxQixLQUFLMEIsU0FBV0EsQ0FDcEIsQ0FFQUUsY0FDSSxPQUFPNUIsS0FBSzBCLFFBQ2hCLENBRUFHLFdBQVdDLEdBQ1AsT0FBTzlCLEtBQUswQixTQUFTakIsTUFBS3NCLEdBQVdBLEVBQVE3QixZQUFjNEIsR0FDL0QsQ0FFQUUsV0FBV0MsR0FDSGpDLEtBQUswQixTQUFTakIsTUFBS3NCLEdBQVdBLEVBQVE3QixZQUFjK0IsRUFBV2xDLFFBQy9EQyxLQUFLMEIsU0FBU2IsS0FBS29CLEVBRTNCLENBRUFDLGNBQWNKLEdBQ1YsTUFBTUssRUFBa0JuQyxLQUFLMEIsU0FBU2pCLE1BQUtzQixHQUFXQSxFQUFRN0IsWUFBYzRCLElBQzVFOUIsS0FBSzBCLFNBQVNWLE9BQU9oQixLQUFLMEIsU0FBU1QsUUFBUWtCLEdBQWtCLEVBQ2pFLEVDeEJZLE1BQU1DLEVBQ2xCQyxjQUFjQyxHQUNWQyxhQUFhQyxRQUFRLFlBQWFDLEtBQUtDLFVBQVVKLEdBQ3JELENBRUFLLGVBQ0ksTUFBTUMsRUFBYUMsT0FBT0MsT0FDdEIsSUFBSXJCLEVBQ0pnQixLQUFLTSxNQUFNUixhQUFhUyxRQUFRLGVBaUJwQyxPQWRBSixFQUFXakIsWUFDUGlCLEVBQVdoQixjQUNWcUIsS0FBSWxCLEdBQVdjLE9BQU9DLE9BQ25CLElBQUlqRCxFQUFXa0MsTUFJdkJhLEVBQVdoQixjQUNWc0IsU0FBUW5CLEdBQ0xBLEVBQVF6QixjQUNKeUIsRUFBUTFCLGdCQUFnQjRDLEtBQ3BCdkMsR0FBT21DLE9BQU9DLE9BQU8sSUFBSTVCLEVBQVdSLFFBR3pDa0MsQ0FDWCxDQUlBWixXQUFXRCxHQUNQLE1BQU1hLEVBQWE1QyxLQUFLMkMsZUFDeEJDLEVBQVdaLFdBQVdELEdBQ3RCL0IsS0FBS3FDLGNBQWNPLEVBQ3ZCLENBRUFWLGNBQWNKLEdBQ1YsTUFBTWMsRUFBYTVDLEtBQUsyQyxlQUN4QkMsRUFBV1YsY0FBY0osR0FDekI5QixLQUFLcUMsY0FBY08sRUFDdkIsQ0FFQWpDLGFBQWFtQixFQUFhcUIsR0FDdEIsTUFBTVAsRUFBYTVDLEtBQUsyQyxlQUN4QkMsRUFBV2YsV0FBV0MsR0FBYW5CLGFBQWF3QyxHQUNoRG5ELEtBQUtxQyxjQUFjTyxFQUN2QixDQUVBOUIsZ0JBQWdCZ0IsRUFBYXFCLEdBQ3pCLE1BQU1QLEVBQWE1QyxLQUFLMkMsZUFDeEJDLEVBQVdmLFdBQVdDLEdBQWFoQixnQkFBZ0JxQyxHQUNuRG5ELEtBQUtxQyxjQUFjTyxFQUN2QixDQUVBUSxnQkFBZ0J0QixFQUFhdEIsRUFBUzZDLEdBQ2xDLE1BQU1ULEVBQWE1QyxLQUFLMkMsZUFDeEJDLEVBQVdmLFdBQVdDLEdBQWF2QixhQUFhQyxHQUFTTCxRQUFRa0QsR0FDakVyRCxLQUFLcUMsY0FBY08sRUFDdkIsRUM1RE8sTUFDSVUsU0FBU0MsY0FBYyxTQUFwQyxNQUNNQyxFQUFPLElBQUlwQixFQUlYcUIsR0FEVSxJQUFJNUQsRUFBUSxtQkFDWCxJQUFJQSxFQUFRLFdBQzdCMkQsRUFBS3hCLFdBQVd5QixHQU1oQixNQUFNTixFQUFZLElBQUlqQyxFQUFVLG9CQUFxQix1QkFDL0N3QyxFQUFpQixJQUFJeEMsRUFBVSxpQkFBa0IsWUFDdkRzQyxFQUFLN0MsYUFBYSxRQUFTd0MsR0FDM0JLLEVBQUs3QyxhQUFhLFFBQVMrQyxHQUMzQixNQUFNQyxFQUFhLElBQUl6QyxFQUFVLHVCQUF3QixXQUN6RHNDLEVBQUs3QyxhQUFhLFNBQVVnRCxHQUU1QixNQUFNQyxFQUFjTixTQUFTQyxjQUFjLGFBQ3JDTSxFQUFnQlAsU0FBU0MsY0FBYyxlQUN2Q08sRUFBZVIsU0FBU0MsY0FBYyxzQkFZNUMsU0FBU1EsRUFBcUJoQyxHQUM1QixNQUFNaUMsRUFBaUJWLFNBQVNXLGNBQWMsTUFDOUNELEVBQWVFLFVBQVVDLElBQUksV0FDN0JILEVBQWVJLGFBQWEsT0FBUSxVQUNwQyxNQUFNQyxFQUFjZixTQUFTVyxjQUFjLE1BUzNDLE9BUkFJLEVBQVlDLFlBQWN2QyxFQUFRN0IsVUFFbEM4RCxFQUFlTyxpQkFBaUIsU0FBUyxNQWdDM0MsU0FBMEJDLEdBQ3hCQyxFQUFNWixHQUNOLE1BQU1hLEVBQWtCRixFQUFjbkUsZ0JBRVAsSUFBM0JxRSxFQUFnQkMsT0FDbEJiLEVBQWFjLE1BQU1DLFFBQVUsT0FFN0JmLEVBQWFjLE1BQU1DLFFBQVUsUUFFL0IsSUFBSyxNQUFNMUIsS0FBYXVCLEVBQ3RCYixFQUFjaUIsWUFBWUMsRUFBdUI1QixHQUVyRCxDQTNDSTZCLENBQWlCakQsRUFBUSxJQUczQmlDLEVBQWVjLFlBQVlULEdBRXBCTCxDQUNULENBSUEsU0FBU2UsRUFBdUI1QixHQUM5QixNQUFNOEIsRUFBbUIzQixTQUFTVyxjQUFjLE1BQ2hEZ0IsRUFBaUJmLFVBQVVDLElBQUksYUFDL0IsTUFBTWUsRUFBZ0I1QixTQUFTVyxjQUFjLE1BVTdDLE9BVEFpQixFQUFjWixZQUFjbkIsRUFBVWpELFVBT3RDK0UsRUFBaUJILFlBQVlJLEdBRXRCRCxDQUNULENBRUEsU0FBU1IsRUFBTVUsR0FDYkEsRUFBUWIsWUFBYyxFQUN4QixDQTlDc0JoQixTQUFTOEIsZUFBZSxlQUN0QjlCLFNBQVM4QixlQUFlLGlCQXVFaEQsWUFUQSxXQUNFWCxFQUFNYixHQUNOLE1BQU15QixFQUFhN0IsRUFBS2IsZUFBZWpCLFNBQ3ZDLElBQUssTUFBTUssS0FBV3NELEVBQ3BCekIsRUFBWWtCLFlBQVlmLEVBQXFCaEMsR0FFakQsQ0FJRXVELEdBQ0EsTUFBTUMsRUFBUS9CLEVBQUtiLGVBQWVkLFdBQVcsU0FBU3hCLGdCQUN0RCxJQUFLLE1BQU04QyxLQUFhb0MsRUFDdEIxQixFQUFjaUIsWUFBWUMsRUFBdUI1QixHQUVyRCxDQUVBcUMsR0FDQUMsUUFBUUMsSUFBSWxDLEVBQUtiLGVBQWVqQixTQUVqQyxFQTNHVSxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdG9kb2xpc3QvLi9zcmMvTWlzc2lvbi5qcyIsIndlYnBhY2s6Ly90b2RvbGlzdC8uL3NyYy9PYmplY3RpdmUuanMiLCJ3ZWJwYWNrOi8vdG9kb2xpc3QvLi9zcmMvUXVlc3RNZW51LmpzIiwid2VicGFjazovL3RvZG9saXN0Ly4vc3JjL1N0b3JhZ2UuanMiLCJ3ZWJwYWNrOi8vdG9kb2xpc3QvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMgKi9cbmltcG9ydCBPYmplY3RpdmUgZnJvbSAnLi9PYmplY3RpdmUnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNaXNzaW9uIHtcbiAgY29uc3RydWN0b3IobmFtZSkge1xuICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgdGhpcy5vYmplY3RpdmVzID0gW107XG4gIH1cblxuICBnZXROYW1lKCkge1xuICAgIHJldHVybiB0aGlzLm5hbWU7XG4gIH1cblxuICBzZXROYW1lKG5ld05hbWUpIHtcbiAgICB0aGlzLm5hbWUgPSBuZXdOYW1lO1xuICB9XG5cbiAgZ2V0T2JqZWN0aXZlcygpIHtcbiAgICByZXR1cm4gdGhpcy5vYmplY3RpdmVzO1xuICB9XG5cbiAgc2V0T2JqZWN0aXZlcyhvYmplY3RpdmVzKSB7XG4gICAgdGhpcy5vYmplY3RpdmVzID0gb2JqZWN0aXZlcztcbiAgfVxuXG4gIGdldE9iamVjdGl2ZShvYmpOYW1lKSB7XG4gICAgcmV0dXJuIHRoaXMub2JqZWN0aXZlcy5maW5kKChvYmopID0+IG9iai5nZXROYW1lKCkgPT09IG9iak5hbWUpO1xuICB9XG5cbiAgYWRkT2JqZWN0aXZlKG5ld09iaikge1xuICAgIGlmICghdGhpcy5vYmplY3RpdmVzLmZpbmQoKG9iaikgPT4gb2JqLmdldE5hbWUoKSA9PT0gbmV3T2JqLm5hbWUpKSB7XG4gICAgICB0aGlzLm9iamVjdGl2ZXMucHVzaChuZXdPYmopO1xuICAgIH1cbiAgfVxuXG4gIGRlbGV0ZU9iamVjdGl2ZShvYmpOYW1lKSB7XG4gICAgY29uc3Qgb2JqVG9EZWxldGUgPSB0aGlzLm9iamVjdGl2ZXMuZmluZCgob2JqKSA9PiBvYmouZ2V0TmFtZSgpID09PSBvYmpOYW1lKTtcbiAgICB0aGlzLm9iamVjdGl2ZXMuc3BsaWNlKHRoaXMub2JqZWN0aXZlcy5pbmRleE9mKG9ialRvRGVsZXRlKSwgMSk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIE9iamVjdGl2ZSB7XG4gICAgY29uc3RydWN0b3IobmFtZSwgZGVzY3JpcHRpb24sIGR1ZURhdGUpIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZVxuICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb25cbiAgICAgICAgdGhpcy5kdWVEYXRlID0gZHVlRGF0ZVxuICAgIH1cblxuICAgIGdldE5hbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5hbWVcbiAgICB9XG5cbiAgICBzZXROYW1lKG9iak5hbWUpIHtcbiAgICAgICAgdGhpcy5uYW1lID0gb2JqTmFtZVxuICAgIH1cblxuICAgIGdldERlc2NyaXB0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kZXNjcmlwdGlvblxuICAgIH1cblxuICAgIHNldERlc2NyaXB0aW9uKG5ld0Rlc2NyaXB0aW9uKSB7XG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBuZXdEZXNjcmlwdGlvblxuICAgIH1cblxuICAgIGdldER1ZURhdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmR1ZURhdGVcbiAgICB9XG5cbn0iLCJpbXBvcnQgTWlzc2lvbiBmcm9tIFwiLi9NaXNzaW9uXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUXVlc3RNZW51IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5taXNzaW9ucyA9IFtdXG4gICAgICAgIHRoaXMubWlzc2lvbnMucHVzaChuZXcgTWlzc2lvbihcIlRvZGF5XCIpKVxuICAgICAgICB0aGlzLm1pc3Npb25zLnB1c2gobmV3IE1pc3Npb24oXCJUaGlzIFdlZWtcIikpXG4gICAgfVxuXG4gICAgc2V0TWlzc2lvbnMobWlzc2lvbnMpIHtcbiAgICAgICAgdGhpcy5taXNzaW9ucyA9IG1pc3Npb25zXG4gICAgfVxuXG4gICAgZ2V0TWlzc2lvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1pc3Npb25zXG4gICAgfVxuXG4gICAgZ2V0TWlzc2lvbihtaXNzaW9uTmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5taXNzaW9ucy5maW5kKG1pc3Npb24gPT4gbWlzc2lvbi5nZXROYW1lKCkgPT09IG1pc3Npb25OYW1lKVxuICAgIH1cblxuICAgIGFkZE1pc3Npb24obmV3TWlzc2lvbikge1xuICAgICAgICBpZighdGhpcy5taXNzaW9ucy5maW5kKG1pc3Npb24gPT4gbWlzc2lvbi5nZXROYW1lKCkgPT09IG5ld01pc3Npb24ubmFtZSkpIHtcbiAgICAgICAgICAgIHRoaXMubWlzc2lvbnMucHVzaChuZXdNaXNzaW9uKVxuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIGRlbGV0ZU1pc3Npb24obWlzc2lvbk5hbWUpIHtcbiAgICAgICAgY29uc3QgbWlzc2lvblRvRGVsZXRlID0gdGhpcy5taXNzaW9ucy5maW5kKG1pc3Npb24gPT4gbWlzc2lvbi5nZXROYW1lKCkgPT09IG1pc3Npb25OYW1lKSBcbiAgICAgICAgdGhpcy5taXNzaW9ucy5zcGxpY2UodGhpcy5taXNzaW9ucy5pbmRleE9mKG1pc3Npb25Ub0RlbGV0ZSksIDEpXG4gICAgfVxuXG59IiwiLyogZXNsaW50LWRpc2FibGUgY2xhc3MtbWV0aG9kcy11c2UtdGhpcyAqL1xuaW1wb3J0IE1pc3Npb24gZnJvbSBcIi4vTWlzc2lvblwiXG5pbXBvcnQgT2JqZWN0aXZlIGZyb20gXCIuL09iamVjdGl2ZVwiXG5pbXBvcnQgUXVlc3RNZW51IGZyb20gXCIuL1F1ZXN0TWVudVwiXG5cblxuZXhwb3J0ICBkZWZhdWx0IGNsYXNzIFN0b3JhZ2UgeyAgXG4gICAgc2F2ZVF1ZXN0TWVudShkYXRhKSB7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwicXVlc3RtZW51XCIsIEpTT04uc3RyaW5naWZ5KGRhdGEpKVxuICAgIH1cblxuICAgIGdldFF1ZXN0TWVudSgpIHtcbiAgICAgICAgY29uc3QgcXVlc3RzTWVudSA9IE9iamVjdC5hc3NpZ24oXG4gICAgICAgICAgICBuZXcgUXVlc3RNZW51KCksXG4gICAgICAgICAgICBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwicXVlc3RtZW51XCIpKVxuICAgICAgICApXG5cbiAgICAgICAgcXVlc3RzTWVudS5zZXRNaXNzaW9ucyhcbiAgICAgICAgICAgIHF1ZXN0c01lbnUuZ2V0TWlzc2lvbnMoKVxuICAgICAgICAgICAgLm1hcChtaXNzaW9uID0+IE9iamVjdC5hc3NpZ24oXG4gICAgICAgICAgICAgICAgbmV3IE1pc3Npb24oKSwgbWlzc2lvblxuICAgICAgICAgICAgKSlcbiAgICAgICAgKVxuXG4gICAgICAgIHF1ZXN0c01lbnUuZ2V0TWlzc2lvbnMoKVxuICAgICAgICAuZm9yRWFjaChtaXNzaW9uID0+IFxuICAgICAgICAgICAgbWlzc2lvbi5zZXRPYmplY3RpdmVzKFxuICAgICAgICAgICAgICAgIG1pc3Npb24uZ2V0T2JqZWN0aXZlcygpLm1hcChcbiAgICAgICAgICAgICAgICAgICAgb2JqID0+IE9iamVjdC5hc3NpZ24obmV3IE9iamVjdGl2ZSwgb2JqKSlcbiAgICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgICByZXR1cm4gcXVlc3RzTWVudVxuICAgIH1cblxuICAgIC8vIE1ha2Ugc3VyZSBwYXJhbWV0ZXJzIHdpdGggLU5hbWUgaGFzIC5nZXROYW1lKCkgb3IgaXQgd2lsbCBkZWxldGUgd3JvbmcgaXRlbVxuXG4gICAgYWRkTWlzc2lvbihtaXNzaW9uKSB7XG4gICAgICAgIGNvbnN0IHF1ZXN0c01lbnUgPSB0aGlzLmdldFF1ZXN0TWVudSgpXG4gICAgICAgIHF1ZXN0c01lbnUuYWRkTWlzc2lvbihtaXNzaW9uKVxuICAgICAgICB0aGlzLnNhdmVRdWVzdE1lbnUocXVlc3RzTWVudSlcbiAgICB9XG5cbiAgICBkZWxldGVNaXNzaW9uKG1pc3Npb25OYW1lKSB7XG4gICAgICAgIGNvbnN0IHF1ZXN0c01lbnUgPSB0aGlzLmdldFF1ZXN0TWVudSgpXG4gICAgICAgIHF1ZXN0c01lbnUuZGVsZXRlTWlzc2lvbihtaXNzaW9uTmFtZSlcbiAgICAgICAgdGhpcy5zYXZlUXVlc3RNZW51KHF1ZXN0c01lbnUpXG4gICAgfVxuXG4gICAgYWRkT2JqZWN0aXZlKG1pc3Npb25OYW1lLCBvYmplY3RpdmUpIHtcbiAgICAgICAgY29uc3QgcXVlc3RzTWVudSA9IHRoaXMuZ2V0UXVlc3RNZW51KClcbiAgICAgICAgcXVlc3RzTWVudS5nZXRNaXNzaW9uKG1pc3Npb25OYW1lKS5hZGRPYmplY3RpdmUob2JqZWN0aXZlKVxuICAgICAgICB0aGlzLnNhdmVRdWVzdE1lbnUocXVlc3RzTWVudSlcbiAgICB9XG5cbiAgICBkZWxldGVPYmplY3RpdmUobWlzc2lvbk5hbWUsIG9iamVjdGl2ZSkge1xuICAgICAgICBjb25zdCBxdWVzdHNNZW51ID0gdGhpcy5nZXRRdWVzdE1lbnUoKVxuICAgICAgICBxdWVzdHNNZW51LmdldE1pc3Npb24obWlzc2lvbk5hbWUpLmRlbGV0ZU9iamVjdGl2ZShvYmplY3RpdmUpXG4gICAgICAgIHRoaXMuc2F2ZVF1ZXN0TWVudShxdWVzdHNNZW51KVxuICAgIH1cblxuICAgIHJlbmFtZU9iamVjdGl2ZShtaXNzaW9uTmFtZSwgb2JqTmFtZSwgbmV3T2JqTmFtZSkge1xuICAgICAgICBjb25zdCBxdWVzdHNNZW51ID0gdGhpcy5nZXRRdWVzdE1lbnUoKVxuICAgICAgICBxdWVzdHNNZW51LmdldE1pc3Npb24obWlzc2lvbk5hbWUpLmdldE9iamVjdGl2ZShvYmpOYW1lKS5zZXROYW1lKG5ld09iak5hbWUpXG4gICAgICAgIHRoaXMuc2F2ZVF1ZXN0TWVudShxdWVzdHNNZW51KVxuICAgIH1cblxufSIsImltcG9ydCBNaXNzaW9uIGZyb20gJy4vTWlzc2lvbic7XG5pbXBvcnQgT2JqZWN0aXZlIGZyb20gJy4vT2JqZWN0aXZlJztcbmltcG9ydCBTdG9yYWdlIGZyb20gJy4vU3RvcmFnZSc7XG5cbmNvbnN0IFVJID0gKCgpID0+IHtcbiAgY29uc3QgbWFpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYWluJyk7XG4gIGNvbnN0IHRlc3QgPSBuZXcgU3RvcmFnZSgpO1xuXG4gIC8vIER1bW15IE1pc3Npb25zXG4gIGNvbnN0IG1pc3Npb24gPSBuZXcgTWlzc2lvbignVGVzdGluZyBtaXNzaW9uJyk7XG4gIGNvbnN0IG1pc3Npb24yID0gbmV3IE1pc3Npb24oJ1RyeWluZycpO1xuICB0ZXN0LmFkZE1pc3Npb24obWlzc2lvbjIpO1xuXG4gIC8vIFRPRE8gZnVuY3Rpb24gY2hlY2tEdWVEYXRlKCkgdXNpbmcgZGF0ZSBmbnM/XG4gIC8vIFRPRE8gZnVuY3Rpb24gbW92ZU9iamVjdGl2ZVRvVG9kYXkoKVxuXG4gIC8vIER1bW15IE9iamVjdGl2ZXNcbiAgY29uc3Qgb2JqZWN0aXZlID0gbmV3IE9iamVjdGl2ZSgnVGVzdGluZyBvYmplY3RpdmUnLCAndGhpcyBpcyBmb3IgdGVzdGluZycpO1xuICBjb25zdCB0b2RheU9iamVjdGl2ZSA9IG5ldyBPYmplY3RpdmUoJ1Rlc3QgZm9yIFRvZGF5JywgJ3RvZGFhYWF5Jyk7XG4gIHRlc3QuYWRkT2JqZWN0aXZlKCdUb2RheScsIG9iamVjdGl2ZSk7XG4gIHRlc3QuYWRkT2JqZWN0aXZlKCdUb2RheScsIHRvZGF5T2JqZWN0aXZlKTtcbiAgY29uc3Qgb2JqZWN0aXZlMiA9IG5ldyBPYmplY3RpdmUoJ1RyeWluZyBlbXB0eSBtZXNzYWdlJywgJ3Rlc3RpbmcnKTtcbiAgdGVzdC5hZGRPYmplY3RpdmUoJ1RyeWluZycsIG9iamVjdGl2ZTIpO1xuXG4gIGNvbnN0IG1pc3Npb25zQm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1pc3Npb25zJyk7XG4gIGNvbnN0IG9iamVjdGl2ZXNCb3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcub2JqZWN0aXZlcycpO1xuICBjb25zdCBlbXB0eU1lc3NhZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZW1wdHktb2JqLW1lc3NhZ2UnKTtcblxuICBjb25zdCBhZGRNaXNzaW9uQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkZC1taXNzaW9uJyk7XG4gIGNvbnN0IGFkZE9iamVjdGl2ZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGQtb2JqZWN0aXZlJyk7XG4gIC8vIFRPRE8gYWRkIG1pc3Npb24gdXNpbmcgYnV0dG9uXG4gIC8vIFRPRE8gY3JlYXRlIGZvcm0gZm9yIG1pc3Npb24gc3VibWlzc2lvblxuICAvLyBUT0RPIGFkZCBvYmplY3RpdmUgdXNpbmcgYnV0dG9uXG4gIC8vIFRPRE8gY3JlYXRlIGZvcm0gZm9yIG9iamVjdGl2ZSBzdWJtaXNzaW9uXG5cbiAgLy8gdGhpcyBmdW5jdGlvbiB0YWtlcyBtaXNzaW9uIG9iamVjdCBzbyBlbGVtZW50IHRleHRzIG11c3QgYmUgdGFrZW4gZnJvbSBpdHMgcHJvcGVydGllc1xuXG4gIC8vIFRPRE8gZW5hYmxlIGVkaXRpbmcgb2YgbWlzc2lvbiBuYW1lKD8pXG4gIGZ1bmN0aW9uIGNyZWF0ZU1pc3Npb25FbGVtZW50KG1pc3Npb24pIHtcbiAgICBjb25zdCBtaXNzaW9uRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gICAgbWlzc2lvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnbWlzc2lvbicpO1xuICAgIG1pc3Npb25FbGVtZW50LnNldEF0dHJpYnV0ZSgncm9sZScsICdidXR0b24nKTtcbiAgICBjb25zdCBtaXNzaW9uVGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gzJyk7XG4gICAgbWlzc2lvblRleHQudGV4dENvbnRlbnQgPSBtaXNzaW9uLmdldE5hbWUoKTtcblxuICAgIG1pc3Npb25FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgcmVuZGVyT2JqZWN0aXZlcyhtaXNzaW9uKTtcbiAgICB9KTtcblxuICAgIG1pc3Npb25FbGVtZW50LmFwcGVuZENoaWxkKG1pc3Npb25UZXh0KTtcblxuICAgIHJldHVybiBtaXNzaW9uRWxlbWVudDtcbiAgfVxuXG4gIC8vIHRoaXMgZnVuY3Rpb24gdGFrZXMgb2JqZWN0aXZlIG9iamVjdCBzbyBlbGVtZW50IHRleHRzIG11c3QgYmUgdGFrZW4gZnJvbSBpdHMgcHJvcGVydGllc1xuXG4gIGZ1bmN0aW9uIGNyZWF0ZU9iamVjdGl2ZUVsZW1lbnQob2JqZWN0aXZlKSB7XG4gICAgY29uc3Qgb2JqZWN0aXZlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gICAgb2JqZWN0aXZlRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdvYmplY3RpdmUnKTtcbiAgICBjb25zdCBvYmplY3RpdmVUZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDQnKTtcbiAgICBvYmplY3RpdmVUZXh0LnRleHRDb250ZW50ID0gb2JqZWN0aXZlLmdldE5hbWUoKTtcblxuICAgIC8vIFRPRE8gYWRkIGNoZWNrYm94IHRvIGRlbGV0ZSBvYmplY3RpdmUgYWZ0ZXIgZmluaXNoZWRcbiAgICAvLyBUT0RPIGFkZCBkdWVkYXRlXG4gICAgLy8gVE9ETyBhZGQgbGlzdGVuZXIgdG8gZXhwYW5kIG9iaiB0byBzaG93IGRlc2NyaXB0aW9uXG4gICAgLy8gVE9ETyBsaXN0ZW5lci9idXR0b24gdG8gZWRpdCBuYW1lLCBkZXNjcmlwdGlvbiwgYW5kIGRhdGUgb2Ygb2JqZWN0aXZlXG5cbiAgICBvYmplY3RpdmVFbGVtZW50LmFwcGVuZENoaWxkKG9iamVjdGl2ZVRleHQpO1xuXG4gICAgcmV0dXJuIG9iamVjdGl2ZUVsZW1lbnQ7XG4gIH1cblxuICBmdW5jdGlvbiBjbGVhcihlbGVtZW50KSB7XG4gICAgZWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xuICB9XG5cbiAgLy8gUmVuZGVyaW5nIGZ1bmN0aW9uc1xuICBmdW5jdGlvbiByZW5kZXJPYmplY3RpdmVzKGNob3Nlbk1pc3Npb24pIHtcbiAgICBjbGVhcihvYmplY3RpdmVzQm94KTtcbiAgICBjb25zdCBvYmplY3RpdmVzQXJyYXkgPSBjaG9zZW5NaXNzaW9uLmdldE9iamVjdGl2ZXMoKTtcbiAgICAvLyBpZiBhcnJheSBpcyBlbXB0eSBjcmVhdGUgbWVzc2FnZVxuICAgIGlmIChvYmplY3RpdmVzQXJyYXkubGVuZ3RoICE9PSAwKSB7XG4gICAgICBlbXB0eU1lc3NhZ2Uuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICB9IGVsc2Uge1xuICAgICAgZW1wdHlNZXNzYWdlLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IG9iamVjdGl2ZSBvZiBvYmplY3RpdmVzQXJyYXkpIHtcbiAgICAgIG9iamVjdGl2ZXNCb3guYXBwZW5kQ2hpbGQoY3JlYXRlT2JqZWN0aXZlRWxlbWVudChvYmplY3RpdmUpKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiByZW5kZXJNaXNzaW9ucygpIHtcbiAgICBjbGVhcihtaXNzaW9uc0JveCk7XG4gICAgY29uc3QgcXVlc3RBcnJheSA9IHRlc3QuZ2V0UXVlc3RNZW51KCkubWlzc2lvbnM7XG4gICAgZm9yIChjb25zdCBtaXNzaW9uIG9mIHF1ZXN0QXJyYXkpIHtcbiAgICAgIG1pc3Npb25zQm94LmFwcGVuZENoaWxkKGNyZWF0ZU1pc3Npb25FbGVtZW50KG1pc3Npb24pKTtcbiAgICB9XG4gIH1cblxuICAvLyByZW5kZXIgVG9kYXkncyBtaXNzaW9uIGFuZCBvYmplY3RpdmVzIHdoZW4gcGFnZSBsb2Fkc1xuICBmdW5jdGlvbiByZW5kZXJUb2RheSgpIHtcbiAgICByZW5kZXJNaXNzaW9ucygpO1xuICAgIGNvbnN0IHRvZGF5ID0gdGVzdC5nZXRRdWVzdE1lbnUoKS5nZXRNaXNzaW9uKCdUb2RheScpLmdldE9iamVjdGl2ZXMoKTtcbiAgICBmb3IgKGNvbnN0IG9iamVjdGl2ZSBvZiB0b2RheSkge1xuICAgICAgb2JqZWN0aXZlc0JveC5hcHBlbmRDaGlsZChjcmVhdGVPYmplY3RpdmVFbGVtZW50KG9iamVjdGl2ZSkpO1xuICAgIH1cbiAgfVxuXG4gIHJlbmRlclRvZGF5KCk7XG4gIGNvbnNvbGUubG9nKHRlc3QuZ2V0UXVlc3RNZW51KCkubWlzc2lvbnMpO1xuICByZXR1cm4gbWFpbjtcbn0pKCk7XG4iXSwibmFtZXMiOlsiTWlzc2lvbiIsImNvbnN0cnVjdG9yIiwibmFtZSIsInRoaXMiLCJvYmplY3RpdmVzIiwiZ2V0TmFtZSIsInNldE5hbWUiLCJuZXdOYW1lIiwiZ2V0T2JqZWN0aXZlcyIsInNldE9iamVjdGl2ZXMiLCJnZXRPYmplY3RpdmUiLCJvYmpOYW1lIiwiZmluZCIsIm9iaiIsImFkZE9iamVjdGl2ZSIsIm5ld09iaiIsInB1c2giLCJkZWxldGVPYmplY3RpdmUiLCJvYmpUb0RlbGV0ZSIsInNwbGljZSIsImluZGV4T2YiLCJPYmplY3RpdmUiLCJkZXNjcmlwdGlvbiIsImR1ZURhdGUiLCJnZXREZXNjcmlwdGlvbiIsInNldERlc2NyaXB0aW9uIiwibmV3RGVzY3JpcHRpb24iLCJnZXREdWVEYXRlIiwiUXVlc3RNZW51IiwibWlzc2lvbnMiLCJzZXRNaXNzaW9ucyIsImdldE1pc3Npb25zIiwiZ2V0TWlzc2lvbiIsIm1pc3Npb25OYW1lIiwibWlzc2lvbiIsImFkZE1pc3Npb24iLCJuZXdNaXNzaW9uIiwiZGVsZXRlTWlzc2lvbiIsIm1pc3Npb25Ub0RlbGV0ZSIsIlN0b3JhZ2UiLCJzYXZlUXVlc3RNZW51IiwiZGF0YSIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJKU09OIiwic3RyaW5naWZ5IiwiZ2V0UXVlc3RNZW51IiwicXVlc3RzTWVudSIsIk9iamVjdCIsImFzc2lnbiIsInBhcnNlIiwiZ2V0SXRlbSIsIm1hcCIsImZvckVhY2giLCJvYmplY3RpdmUiLCJyZW5hbWVPYmplY3RpdmUiLCJuZXdPYmpOYW1lIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwidGVzdCIsIm1pc3Npb24yIiwidG9kYXlPYmplY3RpdmUiLCJvYmplY3RpdmUyIiwibWlzc2lvbnNCb3giLCJvYmplY3RpdmVzQm94IiwiZW1wdHlNZXNzYWdlIiwiY3JlYXRlTWlzc2lvbkVsZW1lbnQiLCJtaXNzaW9uRWxlbWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJzZXRBdHRyaWJ1dGUiLCJtaXNzaW9uVGV4dCIsInRleHRDb250ZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsImNob3Nlbk1pc3Npb24iLCJjbGVhciIsIm9iamVjdGl2ZXNBcnJheSIsImxlbmd0aCIsInN0eWxlIiwiZGlzcGxheSIsImFwcGVuZENoaWxkIiwiY3JlYXRlT2JqZWN0aXZlRWxlbWVudCIsInJlbmRlck9iamVjdGl2ZXMiLCJvYmplY3RpdmVFbGVtZW50Iiwib2JqZWN0aXZlVGV4dCIsImVsZW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInF1ZXN0QXJyYXkiLCJyZW5kZXJNaXNzaW9ucyIsInRvZGF5IiwicmVuZGVyVG9kYXkiLCJjb25zb2xlIiwibG9nIl0sInNvdXJjZVJvb3QiOiIifQ==