(()=>{"use strict";class e{constructor(e){this.name=e,this.objectives=[]}getName(){return this.name}getObjectives(){return this.objectives}setObjectives(e){this.objectives=e}getObjective(e){return this.objectives.find((t=>t.getName()===e))}addObjective(e){this.objectives.find((t=>t.getName()===e.name))||this.objectives.push(e)}deleteObjective(e){let t=this.objectives.find((t=>t.getName()===e));this.objectives.splice(this.objectives.indexOf(t),1)}}class t{constructor(e,t,s){this.name=e,this.description=t,this.dueDate=s}getName(){return this.name}setName(e){this.name=e}getDescription(){return this.description}setDescription(e){this.description=e}getDueDate(){return this.dueDate}}class s{constructor(){this.missions=[],this.missions.push(new e("Today")),this.missions.push(new e("This Week"))}setMissions(e){this.missions=e}getMissions(){return this.missions}getMission(e){return this.missions.find((t=>t.getName()===e))}addMission(e){this.missions.find((t=>t.getName()===e.name))||this.missions.push(e)}deleteMission(e){let t=this.missions.find((t=>t.getName()===e));this.missions.splice(this.missions.indexOf(t),1)}}class i{saveQuestMenu(e){localStorage.setItem("questmenu",JSON.stringify(e))}getQuestMenu(){const i=Object.assign(new s,JSON.parse(localStorage.getItem("questmenu")));return i.setMissions(i.getMissions().map((t=>Object.assign(new e,t)))),i.getMissions().forEach((e=>e.setObjectives(e.getObjectives().map((e=>Object.assign(new t,e)))))),i}addMission(e){const t=this.getQuestMenu();t.addMission(e),this.saveQuestMenu(t)}deleteMission(e){const t=this.getQuestMenu();t.deleteMission(e),this.saveQuestMenu(t)}addObjective(e,t){const s=this.getQuestMenu();s.getMission(e).addObjective(t),this.saveQuestMenu(s)}deleteObjective(e,t){const s=this.getQuestMenu();s.getMission(e).deleteObjective(t),this.saveQuestMenu(s)}renameObjective(e,t,s){const i=this.getQuestMenu();i.getMission(e).getObjective(t).setName(s),this.saveQuestMenu(i)}}(()=>{document.querySelector(".main");const s=new i;new e("Testing mission");let n=new e("Trying");s.addMission(n);let o=new t("Testing objective","this is for testing"),c=new t("Test for Today","todaaaay");s.addObjective("Today",o),s.addObjective("Today",c);let a=new t("Trying empty message","testing");s.addObjective("Trying",a);const d=document.querySelector(".missions"),u=document.querySelector(".objectives"),m=document.querySelector(".empty-obj-message");function r(e){const t=document.createElement("li");t.classList.add("mission"),t.setAttribute("role","button");const s=document.createElement("h3");return s.textContent=e.getName(),t.addEventListener("click",(()=>{!function(e){u.textContent="";let t=e.getObjectives();0!==t.length?m.style.display="none":m.style.display="block";for(let e of t)u.appendChild(l(e))}(e)})),t.appendChild(s),t}function l(e){const t=document.createElement("li");t.classList.add("objective");const s=document.createElement("h4");return s.textContent=e.getName(),t.appendChild(s),t}document.getElementById("add-mission"),document.getElementById("add-objective"),function(){!function(){let e=s.getQuestMenu().missions;for(let t of e)d.appendChild(r(t))}();let e=s.getQuestMenu().getMission("Today").getObjectives();for(let t of e)u.appendChild(l(t))}(),console.log(s.getQuestMenu().missions)})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkQsRUFBY3BFLGdCQUVOLElBQTNCcUUsRUFBZ0JDLE9BQ2ZaLEVBQWFhLE1BQU1DLFFBQVUsT0FFN0JkLEVBQWFhLE1BQU1DLFFBQVUsUUFFakMsSUFBSSxJQUFJekIsS0FBYXNCLEVBQ2pCWixFQUFjZ0IsWUFBWUMsRUFBdUIzQixHQUV6RCxDQS9DUTRCLENBQWlCaEQsRUFBTyxJQUc1QmlDLEVBQWVhLFlBQVlSLEdBRXBCTCxDQUNYLENBSUEsU0FBU2MsRUFBdUIzQixHQUM1QixNQUFNNkIsRUFBbUIxQixTQUFTVyxjQUFjLE1BQ2hEZSxFQUFpQmQsVUFBVUMsSUFBSSxhQUMvQixNQUFNYyxFQUFnQjNCLFNBQVNXLGNBQWMsTUFVN0MsT0FUQWdCLEVBQWNYLFlBQWNuQixFQUFVaEQsVUFPdEM2RSxFQUFpQkgsWUFBWUksR0FFdEJELENBQ1gsQ0F4Q3NCMUIsU0FBUzRCLGVBQWUsZUFDdEI1QixTQUFTNEIsZUFBZSxpQkF3RWhELFlBUkEsV0FDSSxJQUFJQyxFQUFhM0IsRUFBS2IsZUFBZWpCLFNBQ3JDLElBQUksSUFBSUssS0FBV29ELEVBQ2Z2QixFQUFZaUIsWUFBWWQsRUFBcUJoQyxHQUVyRCxDQUlJcUQsR0FDQSxJQUFJQyxFQUFRN0IsRUFBS2IsZUFBZWQsV0FBVyxTQUFTekIsZ0JBQ3BELElBQUksSUFBSStDLEtBQWFrQyxFQUNqQnhCLEVBQWNnQixZQUFZQyxFQUF1QjNCLEdBRXpELENBRUFtQyxHQUNBQyxRQUFRQyxJQUFJaEMsRUFBS2IsZUFBZWpCLFNBRW5DLEVBNUdVLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvbGlzdC8uL3NyYy9NaXNzaW9uLmpzIiwid2VicGFjazovL3RvZG9saXN0Ly4vc3JjL09iamVjdGl2ZS5qcyIsIndlYnBhY2s6Ly90b2RvbGlzdC8uL3NyYy9RdWVzdE1lbnUuanMiLCJ3ZWJwYWNrOi8vdG9kb2xpc3QvLi9zcmMvU3RvcmFnZS5qcyIsIndlYnBhY2s6Ly90b2RvbGlzdC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgT2JqZWN0aXZlIGZyb20gXCIuL09iamVjdGl2ZVwiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1pc3Npb24ge1xuICAgIGNvbnN0cnVjdG9yKG5hbWUpIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZVxuICAgICAgICB0aGlzLm9iamVjdGl2ZXMgPSBbXVxuICAgIH1cblxuICAgIGdldE5hbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5hbWVcbiAgICB9XG5cbiAgICBnZXRPYmplY3RpdmVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vYmplY3RpdmVzXG4gICAgfVxuXG4gICAgc2V0T2JqZWN0aXZlcyhvYmplY3RpdmVzKSB7XG4gICAgICAgIHRoaXMub2JqZWN0aXZlcyA9IG9iamVjdGl2ZXNcbiAgICB9XG5cbiAgICBnZXRPYmplY3RpdmUob2JqTmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5vYmplY3RpdmVzLmZpbmQob2JqID0+IG9iai5nZXROYW1lKCkgPT09IG9iak5hbWUpXG4gICAgfVxuXG4gICAgYWRkT2JqZWN0aXZlKG5ld09iaikge1xuICAgICAgICBpZighdGhpcy5vYmplY3RpdmVzLmZpbmQob2JqID0+IG9iai5nZXROYW1lKCkgPT09IG5ld09iai5uYW1lKSkge1xuICAgICAgICAgICAgdGhpcy5vYmplY3RpdmVzLnB1c2gobmV3T2JqKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZGVsZXRlT2JqZWN0aXZlKG9iak5hbWUpIHtcbiAgICAgICAgbGV0IG9ialRvRGVsZXRlID0gdGhpcy5vYmplY3RpdmVzLmZpbmQob2JqID0+IG9iai5nZXROYW1lKCkgPT09IG9iak5hbWUpXG4gICAgICAgIHRoaXMub2JqZWN0aXZlcy5zcGxpY2UodGhpcy5vYmplY3RpdmVzLmluZGV4T2Yob2JqVG9EZWxldGUpLCAxKVxuICAgIH1cblxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIE9iamVjdGl2ZSB7XG4gICAgY29uc3RydWN0b3IobmFtZSwgZGVzY3JpcHRpb24sIGR1ZURhdGUpIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZVxuICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb25cbiAgICAgICAgdGhpcy5kdWVEYXRlID0gZHVlRGF0ZVxuICAgIH1cblxuICAgIGdldE5hbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5hbWVcbiAgICB9XG5cbiAgICBzZXROYW1lKG9iak5hbWUpIHtcbiAgICAgICAgdGhpcy5uYW1lID0gb2JqTmFtZVxuICAgIH1cblxuICAgIGdldERlc2NyaXB0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kZXNjcmlwdGlvblxuICAgIH1cblxuICAgIHNldERlc2NyaXB0aW9uKG5ld0Rlc2NyaXB0aW9uKSB7XG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBuZXdEZXNjcmlwdGlvblxuICAgIH1cblxuICAgIGdldER1ZURhdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmR1ZURhdGVcbiAgICB9XG5cbn0iLCJpbXBvcnQgTWlzc2lvbiBmcm9tIFwiLi9NaXNzaW9uXCJcblxuZXhwb3J0IGNsYXNzIFF1ZXN0TWVudSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMubWlzc2lvbnMgPSBbXVxuICAgICAgICB0aGlzLm1pc3Npb25zLnB1c2gobmV3IE1pc3Npb24oXCJUb2RheVwiKSlcbiAgICAgICAgdGhpcy5taXNzaW9ucy5wdXNoKG5ldyBNaXNzaW9uKFwiVGhpcyBXZWVrXCIpKVxuICAgIH1cblxuICAgIHNldE1pc3Npb25zKG1pc3Npb25zKSB7XG4gICAgICAgIHRoaXMubWlzc2lvbnMgPSBtaXNzaW9uc1xuICAgIH1cblxuICAgIGdldE1pc3Npb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5taXNzaW9uc1xuICAgIH1cblxuICAgIGdldE1pc3Npb24obWlzc2lvbk5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWlzc2lvbnMuZmluZChtaXNzaW9uID0+IG1pc3Npb24uZ2V0TmFtZSgpID09PSBtaXNzaW9uTmFtZSlcbiAgICB9XG5cbiAgICBhZGRNaXNzaW9uKG5ld01pc3Npb24pIHtcbiAgICAgICAgaWYoIXRoaXMubWlzc2lvbnMuZmluZChtaXNzaW9uID0+IG1pc3Npb24uZ2V0TmFtZSgpID09PSBuZXdNaXNzaW9uLm5hbWUpKSB7XG4gICAgICAgICAgICB0aGlzLm1pc3Npb25zLnB1c2gobmV3TWlzc2lvbilcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBkZWxldGVNaXNzaW9uKG1pc3Npb25OYW1lKSB7XG4gICAgICAgIGxldCBtaXNzaW9uVG9EZWxldGUgPSB0aGlzLm1pc3Npb25zLmZpbmQobWlzc2lvbiA9PiBtaXNzaW9uLmdldE5hbWUoKSA9PT0gbWlzc2lvbk5hbWUpIFxuICAgICAgICB0aGlzLm1pc3Npb25zLnNwbGljZSh0aGlzLm1pc3Npb25zLmluZGV4T2YobWlzc2lvblRvRGVsZXRlKSwgMSlcbiAgICB9XG5cbn0iLCJpbXBvcnQgTWlzc2lvbiBmcm9tIFwiLi9NaXNzaW9uXCJcbmltcG9ydCBPYmplY3RpdmUgZnJvbSBcIi4vT2JqZWN0aXZlXCJcbmltcG9ydCB7IFF1ZXN0TWVudSB9IGZyb20gXCIuL1F1ZXN0TWVudVwiXG5cblxuZXhwb3J0IGNsYXNzIFN0b3JhZ2Uge1xuICAgIHNhdmVRdWVzdE1lbnUoZGF0YSkge1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInF1ZXN0bWVudVwiLCBKU09OLnN0cmluZ2lmeShkYXRhKSlcbiAgICB9XG5cbiAgICBnZXRRdWVzdE1lbnUoKSB7XG4gICAgICAgIGNvbnN0IHF1ZXN0c01lbnUgPSBPYmplY3QuYXNzaWduKFxuICAgICAgICAgICAgbmV3IFF1ZXN0TWVudSgpLFxuICAgICAgICAgICAgSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInF1ZXN0bWVudVwiKSlcbiAgICAgICAgKVxuXG4gICAgICAgIHF1ZXN0c01lbnUuc2V0TWlzc2lvbnMoXG4gICAgICAgICAgICBxdWVzdHNNZW51LmdldE1pc3Npb25zKClcbiAgICAgICAgICAgIC5tYXAobWlzc2lvbiA9PiBPYmplY3QuYXNzaWduKFxuICAgICAgICAgICAgICAgIG5ldyBNaXNzaW9uKCksIG1pc3Npb25cbiAgICAgICAgICAgICkpXG4gICAgICAgIClcblxuICAgICAgICBxdWVzdHNNZW51LmdldE1pc3Npb25zKClcbiAgICAgICAgLmZvckVhY2gobWlzc2lvbiA9PiBcbiAgICAgICAgICAgIG1pc3Npb24uc2V0T2JqZWN0aXZlcyhcbiAgICAgICAgICAgICAgICBtaXNzaW9uLmdldE9iamVjdGl2ZXMoKS5tYXAoXG4gICAgICAgICAgICAgICAgICAgIG9iaiA9PiBPYmplY3QuYXNzaWduKG5ldyBPYmplY3RpdmUsIG9iaikpXG4gICAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgICAgcmV0dXJuIHF1ZXN0c01lbnVcbiAgICB9XG5cbiAgICAvL01ha2Ugc3VyZSBwYXJhbWV0ZXJzIHdpdGggLU5hbWUgaGFzIC5nZXROYW1lKCkgb3IgaXQgd2lsbCBkZWxldGUgd3JvbmcgaXRlbVxuXG4gICAgYWRkTWlzc2lvbihtaXNzaW9uKSB7XG4gICAgICAgIGNvbnN0IHF1ZXN0c01lbnUgPSB0aGlzLmdldFF1ZXN0TWVudSgpXG4gICAgICAgIHF1ZXN0c01lbnUuYWRkTWlzc2lvbihtaXNzaW9uKVxuICAgICAgICB0aGlzLnNhdmVRdWVzdE1lbnUocXVlc3RzTWVudSlcbiAgICB9XG5cbiAgICBkZWxldGVNaXNzaW9uKG1pc3Npb25OYW1lKSB7XG4gICAgICAgIGNvbnN0IHF1ZXN0c01lbnUgPSB0aGlzLmdldFF1ZXN0TWVudSgpXG4gICAgICAgIHF1ZXN0c01lbnUuZGVsZXRlTWlzc2lvbihtaXNzaW9uTmFtZSlcbiAgICAgICAgdGhpcy5zYXZlUXVlc3RNZW51KHF1ZXN0c01lbnUpXG4gICAgfVxuXG4gICAgYWRkT2JqZWN0aXZlKG1pc3Npb25OYW1lLCBvYmplY3RpdmUpIHtcbiAgICAgICAgY29uc3QgcXVlc3RzTWVudSA9IHRoaXMuZ2V0UXVlc3RNZW51KClcbiAgICAgICAgcXVlc3RzTWVudS5nZXRNaXNzaW9uKG1pc3Npb25OYW1lKS5hZGRPYmplY3RpdmUob2JqZWN0aXZlKVxuICAgICAgICB0aGlzLnNhdmVRdWVzdE1lbnUocXVlc3RzTWVudSlcbiAgICB9XG5cbiAgICBkZWxldGVPYmplY3RpdmUobWlzc2lvbk5hbWUsIG9iamVjdGl2ZSkge1xuICAgICAgICBjb25zdCBxdWVzdHNNZW51ID0gdGhpcy5nZXRRdWVzdE1lbnUoKVxuICAgICAgICBxdWVzdHNNZW51LmdldE1pc3Npb24obWlzc2lvbk5hbWUpLmRlbGV0ZU9iamVjdGl2ZShvYmplY3RpdmUpXG4gICAgICAgIHRoaXMuc2F2ZVF1ZXN0TWVudShxdWVzdHNNZW51KVxuICAgIH1cblxuICAgIHJlbmFtZU9iamVjdGl2ZShtaXNzaW9uTmFtZSwgb2JqTmFtZSwgbmV3T2JqTmFtZSkge1xuICAgICAgICBjb25zdCBxdWVzdHNNZW51ID0gdGhpcy5nZXRRdWVzdE1lbnUoKVxuICAgICAgICBxdWVzdHNNZW51LmdldE1pc3Npb24obWlzc2lvbk5hbWUpLmdldE9iamVjdGl2ZShvYmpOYW1lKS5zZXROYW1lKG5ld09iak5hbWUpXG4gICAgICAgIHRoaXMuc2F2ZVF1ZXN0TWVudShxdWVzdHNNZW51KVxuICAgIH1cblxufSIsImltcG9ydCAgTWlzc2lvbiAgZnJvbSBcIi4vTWlzc2lvblwiO1xuaW1wb3J0IE9iamVjdGl2ZSBmcm9tIFwiLi9PYmplY3RpdmVcIjtcbmltcG9ydCB7IFF1ZXN0TWVudSB9IGZyb20gXCIuL1F1ZXN0TWVudVwiO1xuaW1wb3J0IHsgU3RvcmFnZSB9IGZyb20gXCIuL1N0b3JhZ2VcIjtcblxuY29uc3QgVUkgPSAoKCkgPT4ge1xuICAgIGNvbnN0IG1haW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1haW5cIilcbiAgICBjb25zdCB0ZXN0ID0gbmV3IFN0b3JhZ2UoKVxuICAgIFxuICAgIC8vRHVtbXkgTWlzc2lvbnNcbiAgICBsZXQgbWlzc2lvbiA9IG5ldyBNaXNzaW9uKFwiVGVzdGluZyBtaXNzaW9uXCIpXG4gICAgbGV0IG1pc3Npb24yID0gbmV3IE1pc3Npb24oXCJUcnlpbmdcIilcbiAgICB0ZXN0LmFkZE1pc3Npb24obWlzc2lvbjIpXG5cbiAgICAvL1RPRE8gZnVuY3Rpb24gY2hlY2tEdWVEYXRlKCkgdXNpbmcgZGF0ZSBmbnM/XG4gICAgLy9UT0RPIGZ1bmN0aW9uIG1vdmVPYmplY3RpdmVUb1RvZGF5KClcblxuICAgIC8vRHVtbXkgT2JqZWN0aXZlc1xuICAgIGxldCBvYmplY3RpdmUgPSBuZXcgT2JqZWN0aXZlKFwiVGVzdGluZyBvYmplY3RpdmVcIiwgXCJ0aGlzIGlzIGZvciB0ZXN0aW5nXCIpXG4gICAgbGV0IHRvZGF5T2JqZWN0aXZlID1uZXcgT2JqZWN0aXZlKFwiVGVzdCBmb3IgVG9kYXlcIiwgXCJ0b2RhYWFheVwiKVxuICAgIHRlc3QuYWRkT2JqZWN0aXZlKFwiVG9kYXlcIiwgb2JqZWN0aXZlKVxuICAgIHRlc3QuYWRkT2JqZWN0aXZlKFwiVG9kYXlcIiwgdG9kYXlPYmplY3RpdmUpXG4gICAgbGV0IG9iamVjdGl2ZTIgPSBuZXcgT2JqZWN0aXZlKFwiVHJ5aW5nIGVtcHR5IG1lc3NhZ2VcIiwgXCJ0ZXN0aW5nXCIpXG4gICAgdGVzdC5hZGRPYmplY3RpdmUoXCJUcnlpbmdcIiwgb2JqZWN0aXZlMilcbiAgICBcbiAgICBjb25zdCBtaXNzaW9uc0JveCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWlzc2lvbnNcIilcbiAgICBjb25zdCBvYmplY3RpdmVzQm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5vYmplY3RpdmVzXCIpXG4gICAgY29uc3QgZW1wdHlNZXNzYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbXB0eS1vYmotbWVzc2FnZVwiKSBcblxuICAgIGNvbnN0IGFkZE1pc3Npb25CdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkZC1taXNzaW9uXCIpXG4gICAgY29uc3QgYWRkT2JqZWN0aXZlQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZGQtb2JqZWN0aXZlXCIpXG4gICAgLy9UT0RPIGFkZCBtaXNzaW9uIHVzaW5nIGJ1dHRvblxuICAgIC8vVE9ETyBjcmVhdGUgZm9ybSBmb3IgbWlzc2lvbiBzdWJtaXNzaW9uXG4gICAgLy9UT0RPIGFkZCBvYmplY3RpdmUgdXNpbmcgYnV0dG9uXG4gICAgLy9UT0RPIGNyZWF0ZSBmb3JtIGZvciBvYmplY3RpdmUgc3VibWlzc2lvblxuXG4gICAgLy90aGlzIGZ1bmN0aW9uIHRha2VzIG1pc3Npb24gb2JqZWN0IHNvIGVsZW1lbnQgdGV4dHMgbXVzdCBiZSB0YWtlbiBmcm9tIGl0cyBwcm9wZXJ0aWVzXG4gICAgZnVuY3Rpb24gY3JlYXRlTWlzc2lvbkVsZW1lbnQobWlzc2lvbikge1xuICAgICAgICBjb25zdCBtaXNzaW9uRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKVxuICAgICAgICBtaXNzaW9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibWlzc2lvblwiKVxuICAgICAgICBtaXNzaW9uRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsIFwiYnV0dG9uXCIpXG4gICAgICAgIGNvbnN0IG1pc3Npb25UZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImgzXCIpXG4gICAgICAgIG1pc3Npb25UZXh0LnRleHRDb250ZW50ID0gbWlzc2lvbi5nZXROYW1lKClcblxuICAgICAgICBtaXNzaW9uRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgcmVuZGVyT2JqZWN0aXZlcyhtaXNzaW9uKVxuICAgICAgICB9KVxuXG4gICAgICAgIG1pc3Npb25FbGVtZW50LmFwcGVuZENoaWxkKG1pc3Npb25UZXh0KVxuXG4gICAgICAgIHJldHVybiBtaXNzaW9uRWxlbWVudFxuICAgIH1cblxuICAgIC8vdGhpcyBmdW5jdGlvbiB0YWtlcyBvYmplY3RpdmUgb2JqZWN0IHNvIGVsZW1lbnQgdGV4dHMgbXVzdCBiZSB0YWtlbiBmcm9tIGl0cyBwcm9wZXJ0aWVzIFxuXG4gICAgZnVuY3Rpb24gY3JlYXRlT2JqZWN0aXZlRWxlbWVudChvYmplY3RpdmUpIHtcbiAgICAgICAgY29uc3Qgb2JqZWN0aXZlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKVxuICAgICAgICBvYmplY3RpdmVFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJvYmplY3RpdmVcIilcbiAgICAgICAgY29uc3Qgb2JqZWN0aXZlVGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoNFwiKVxuICAgICAgICBvYmplY3RpdmVUZXh0LnRleHRDb250ZW50ID0gb2JqZWN0aXZlLmdldE5hbWUoKVxuXG4gICAgICAgIC8vVE9ETyBhZGQgY2hlY2tib3ggdG8gZGVsZXRlIG9iamVjdGl2ZSBhZnRlciBmaW5pc2hlZFxuICAgICAgICAvL1RPRE8gYWRkIGR1ZWRhdGVcbiAgICAgICAgLy9UT0RPIGFkZCBsaXN0ZW5lciB0byBleHBhbmQgb2JqIHRvIHNob3cgZGVzY3JpcHRpb25cbiAgICAgICAgLy9UT0RPIGxpc3RlbmVyL2J1dHRvbiB0byBlZGl0IG5hbWUsIGRlc2NyaXB0aW9uLCBhbmQgZGF0ZSBvZiBvYmplY3RpdmVcbiAgICAgICAgXG4gICAgICAgIG9iamVjdGl2ZUVsZW1lbnQuYXBwZW5kQ2hpbGQob2JqZWN0aXZlVGV4dClcblxuICAgICAgICByZXR1cm4gb2JqZWN0aXZlRWxlbWVudFxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNsZWFyTWlzc2lvbnMoKSB7XG4gICAgICAgIG1pc3Npb25zQm94LnRleHRDb250ZW50ID0gXCJcIlxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNsZWFyT2JqZWN0aXZlcygpIHtcbiAgICAgICAgb2JqZWN0aXZlc0JveC50ZXh0Q29udGVudCA9IFwiXCJcbiAgICB9XG5cbiAgICAvL1JlbmRlcmluZyBmdW5jdGlvbnNcbiAgICBmdW5jdGlvbiByZW5kZXJPYmplY3RpdmVzKGNob3Nlbk1pc3Npb24pIHtcbiAgICAgICAgY2xlYXJPYmplY3RpdmVzKClcbiAgICAgICAgbGV0IG9iamVjdGl2ZXNBcnJheSA9IGNob3Nlbk1pc3Npb24uZ2V0T2JqZWN0aXZlcygpXG4gICAgICAgIC8vaWYgYXJyYXkgaXMgZW1wdHkgY3JlYXRlIG1lc3NhZ2VcbiAgICAgICAgaWYob2JqZWN0aXZlc0FycmF5Lmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgZW1wdHlNZXNzYWdlLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIlxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZW1wdHlNZXNzYWdlLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCJcbiAgICAgICAgfVxuICAgICAgICBmb3IobGV0IG9iamVjdGl2ZSBvZiBvYmplY3RpdmVzQXJyYXkpIHtcbiAgICAgICAgICAgIG9iamVjdGl2ZXNCb3guYXBwZW5kQ2hpbGQoY3JlYXRlT2JqZWN0aXZlRWxlbWVudChvYmplY3RpdmUpKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVuZGVyTWlzc2lvbnMoKSB7XG4gICAgICAgIGxldCBxdWVzdEFycmF5ID0gdGVzdC5nZXRRdWVzdE1lbnUoKS5taXNzaW9uc1xuICAgICAgICBmb3IobGV0IG1pc3Npb24gb2YgcXVlc3RBcnJheSkge1xuICAgICAgICAgICAgbWlzc2lvbnNCb3guYXBwZW5kQ2hpbGQoY3JlYXRlTWlzc2lvbkVsZW1lbnQobWlzc2lvbikpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvL3JlbmRlciBUb2RheSdzIG1pc3Npb24gYW5kIG9iamVjdGl2ZXMgd2hlbiBwYWdlIGxvYWRzXG4gICAgZnVuY3Rpb24gcmVuZGVyVG9kYXkoKSB7XG4gICAgICAgIHJlbmRlck1pc3Npb25zKClcbiAgICAgICAgbGV0IHRvZGF5ID0gdGVzdC5nZXRRdWVzdE1lbnUoKS5nZXRNaXNzaW9uKFwiVG9kYXlcIikuZ2V0T2JqZWN0aXZlcygpXG4gICAgICAgIGZvcihsZXQgb2JqZWN0aXZlIG9mIHRvZGF5KSB7XG4gICAgICAgICAgICBvYmplY3RpdmVzQm94LmFwcGVuZENoaWxkKGNyZWF0ZU9iamVjdGl2ZUVsZW1lbnQob2JqZWN0aXZlKSlcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlbmRlclRvZGF5KClcbiAgICBjb25zb2xlLmxvZyh0ZXN0LmdldFF1ZXN0TWVudSgpLm1pc3Npb25zKVxuICAgIHJldHVybiBtYWluXG59KSgpXG4iXSwibmFtZXMiOlsiTWlzc2lvbiIsImNvbnN0cnVjdG9yIiwibmFtZSIsInRoaXMiLCJvYmplY3RpdmVzIiwiZ2V0TmFtZSIsImdldE9iamVjdGl2ZXMiLCJzZXRPYmplY3RpdmVzIiwiZ2V0T2JqZWN0aXZlIiwib2JqTmFtZSIsImZpbmQiLCJvYmoiLCJhZGRPYmplY3RpdmUiLCJuZXdPYmoiLCJwdXNoIiwiZGVsZXRlT2JqZWN0aXZlIiwib2JqVG9EZWxldGUiLCJzcGxpY2UiLCJpbmRleE9mIiwiT2JqZWN0aXZlIiwiZGVzY3JpcHRpb24iLCJkdWVEYXRlIiwic2V0TmFtZSIsImdldERlc2NyaXB0aW9uIiwic2V0RGVzY3JpcHRpb24iLCJuZXdEZXNjcmlwdGlvbiIsImdldER1ZURhdGUiLCJRdWVzdE1lbnUiLCJtaXNzaW9ucyIsInNldE1pc3Npb25zIiwiZ2V0TWlzc2lvbnMiLCJnZXRNaXNzaW9uIiwibWlzc2lvbk5hbWUiLCJtaXNzaW9uIiwiYWRkTWlzc2lvbiIsIm5ld01pc3Npb24iLCJkZWxldGVNaXNzaW9uIiwibWlzc2lvblRvRGVsZXRlIiwiU3RvcmFnZSIsInNhdmVRdWVzdE1lbnUiLCJkYXRhIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsIkpTT04iLCJzdHJpbmdpZnkiLCJnZXRRdWVzdE1lbnUiLCJxdWVzdHNNZW51IiwiT2JqZWN0IiwiYXNzaWduIiwicGFyc2UiLCJnZXRJdGVtIiwibWFwIiwiZm9yRWFjaCIsIm9iamVjdGl2ZSIsInJlbmFtZU9iamVjdGl2ZSIsIm5ld09iak5hbWUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJ0ZXN0IiwibWlzc2lvbjIiLCJ0b2RheU9iamVjdGl2ZSIsIm9iamVjdGl2ZTIiLCJtaXNzaW9uc0JveCIsIm9iamVjdGl2ZXNCb3giLCJlbXB0eU1lc3NhZ2UiLCJjcmVhdGVNaXNzaW9uRWxlbWVudCIsIm1pc3Npb25FbGVtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsInNldEF0dHJpYnV0ZSIsIm1pc3Npb25UZXh0IiwidGV4dENvbnRlbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiY2hvc2VuTWlzc2lvbiIsIm9iamVjdGl2ZXNBcnJheSIsImxlbmd0aCIsInN0eWxlIiwiZGlzcGxheSIsImFwcGVuZENoaWxkIiwiY3JlYXRlT2JqZWN0aXZlRWxlbWVudCIsInJlbmRlck9iamVjdGl2ZXMiLCJvYmplY3RpdmVFbGVtZW50Iiwib2JqZWN0aXZlVGV4dCIsImdldEVsZW1lbnRCeUlkIiwicXVlc3RBcnJheSIsInJlbmRlck1pc3Npb25zIiwidG9kYXkiLCJyZW5kZXJUb2RheSIsImNvbnNvbGUiLCJsb2ciXSwic291cmNlUm9vdCI6IiJ9